React 为什么会有 Fiber？

React 是基于 Virtual DOM 实现的，其核心实现是通过将所有组件对应的 DOM 树转化为 Virtual DOM 树，然后再将 Virtual DOM 树渲染到真实 DOM 树上，从而实现页面的更新。

但在 React 处理大型应用时，其所需处理的 Virtual DOM 树也变得越来越大，而原有的递归算法在处理这么多节点时，性能上有极大的问题和不足。在 React 16 中，Fiber 就是一种新的算法，其主要目的是改进 React 在大型应用场景下的性能表现。

React Fiber是React v16中引入的新的reconciliation（协调）引擎，是一个全新的设计，可以更好地处理比以前更复杂的组件层次结构和更新流程。它的主要目标是改进React在高负载场景下的性能和用户体验，从而解决React v15及之前版本的性能瓶颈。

Fiber 的出现主要解决两个问题：

- 递归算法可能会阻塞 JS 脚本的执行，导致用户体验下降。
- 当前的递归算法不能实现时间分片，也就是不能将一次更新的工作分离成多个时间片逐步完成，导致应用在大量更新时可能会出现卡顿现象。

为了解决这些问题，Fiber 改变了 React 的更新模型，并引入了一些概念，如调度器、任务队列、工作单元等。

1. 支持可中断的渲染过程，可以在渲染过程中暂停、继续或中断，以避免阻塞浏览器主线程，提高应用的响应速度和稳定性。

2. 支持并发渲染，可以将渲染工作分成多个任务，同时执行，以减少渲染时间。它还可以根据渲染的优先级调整任务的执行顺序，以最大化用户体验。

3. 支持自定义调度器，并提供多种不同的调度算法，可以根据应用的需要调整渲染策略，以达到最佳的性能和用户体验。

通过这些改进，React Fiber可以帮助开发人员构建更快、更稳定、更高效的React应用程序，提高用户体验和开发效率。
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>
  <script>
    //     2、Promise.race（比比谁先改变状态！）
    // 特点：
    // 传入的参数和返回的结果形式和all方法一样
    // 区别：只要传入的promise有一个状态改变了，最后的结果就会立即改变
    // 例如有一个成功，直接走race的resolve，如果有一个失败，直接走reject
    let p1 = new Promise(resolve => {
      // setTimeout(resolve, 0, 1)//大家猜猜如果是这句，最后是什么结果
      resolve(1);
    });
    let p2 = new Promise((resolve, reject) => reject(2));
    let p3 = 3;
    let myRace = function (parr) {
      return new Promise((resolve, reject) => {
        for (let p of parr) { //一次检查
          Promise.resolve(p).then(resolve, reject); //只要是状态改变了就直接走对应的函数
          //也可以是这样
          //Promise.resolve(p).then(res => {
          //  	resolve(res);
          //},err=>{
          //	reject(err);
          //});
        }
      })
    }
    console.log(myRace([p1, p2, p3]));
  </script>
</body>

</html>